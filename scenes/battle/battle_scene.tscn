[gd_scene load_steps=26 format=3 uid="uid://c83bxdcjre7ye"]

[ext_resource type="PackedScene" uid="uid://vowoply3lfex" path="res://scenes/battle/player/player.tscn" id="1_5w4lb"]
[ext_resource type="Script" path="res://scenes/battle/battle_scene.gd" id="1_kup78"]
[ext_resource type="PackedScene" uid="uid://j154bka1btpo" path="res://scenes/battle/character/Character.tscn" id="2_8bbij"]
[ext_resource type="Script" path="res://scenes/battle/opponent.gd" id="2_ekd0m"]
[ext_resource type="PackedScene" uid="uid://0xafi4choxa8" path="res://scenes/battle/score_card.tscn" id="2_sawi2"]
[ext_resource type="PackedScene" uid="uid://dfp04b2gnqthc" path="res://scenes/battle/lyrics.tscn" id="4_y614f"]
[ext_resource type="FontFile" uid="uid://bib8foqwe6yk0" path="res://assets/gui/AllRightsReserved.ttf" id="5_vtqjp"]
[ext_resource type="Script" path="res://scenes/battle/audio.gd" id="6_1c6vl"]
[ext_resource type="AudioStream" uid="uid://d17k6kmdoiv" path="res://assets/sfx/city_street_loop.wav" id="6_k5xf7"]
[ext_resource type="AudioStream" uid="uid://dacxj1ptl5ryw" path="res://assets/sfx/beat_loop.wav" id="7_qhvl7"]
[ext_resource type="Texture2D" uid="uid://dbh8ljxan7kw6" path="res://assets/textures/Background01.png" id="11_0jstl"]
[ext_resource type="Script" path="res://scenes/battle/bout.gd" id="12_ahgql"]
[ext_resource type="Script" path="res://scenes/battle/vs.gd" id="13_2obuc"]
[ext_resource type="AudioStream" uid="uid://c5figk45shakp" path="res://assets/sfx/bout_start.ogg" id="13_mkk52"]
[ext_resource type="AudioStream" uid="uid://vof4tn3fd3nv" path="res://assets/sfx/bout/1.ogg" id="14_1dwrt"]
[ext_resource type="AudioStream" uid="uid://cyjgx4ajdwifb" path="res://assets/sfx/bout/2.ogg" id="15_lsvah"]
[ext_resource type="AudioStream" uid="uid://xynbudg0bvat" path="res://assets/sfx/bout/3.ogg" id="16_cwoys"]
[ext_resource type="AudioStream" uid="uid://nj14r2fet3fj" path="res://assets/sfx/bout/4.ogg" id="17_uwso4"]
[ext_resource type="AudioStream" uid="uid://iocjxl1tay4n" path="res://assets/sfx/bout/5.ogg" id="18_vtahj"]
[ext_resource type="AudioStream" uid="uid://chu1eeoeou4jn" path="res://assets/sfx/bout/6.ogg" id="19_6uw13"]
[ext_resource type="AudioStream" uid="uid://cmp5duoimjrts" path="res://assets/sfx/bout/7.ogg" id="20_6xxa0"]
[ext_resource type="AudioStream" uid="uid://dc2nk7r0vwmuv" path="res://assets/sfx/bout/8.wav" id="21_e1ktq"]
[ext_resource type="AudioStream" uid="uid://drhomgpeheq28" path="res://assets/sfx/versus.wav" id="23_i5xb0"]
[ext_resource type="AudioStream" uid="uid://b0wgjqij8pwnj" path="res://assets/sfx/winner.wav" id="24_w88v5"]

[sub_resource type="LabelSettings" id="LabelSettings_5toyo"]
font = ExtResource("5_vtqjp")
font_size = 64

[node name="BattleScene" type="Node2D"]
script = ExtResource("1_kup78")

[node name="Backgrounds" type="Control" parent="."]
z_index = -1000
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 1920.0
offset_bottom = 1080.0
grow_horizontal = 2
grow_vertical = 2

[node name="Background" type="TextureRect" parent="Backgrounds"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("11_0jstl")
expand_mode = 3
stretch_mode = 5

[node name="Opponent" type="Node" parent="."]
script = ExtResource("2_ekd0m")

[node name="ScoreCard" parent="." instance=ExtResource("2_sawi2")]
position = Vector2(139, 107)
scale = Vector2(0.6, 0.6)

[node name="Characters" type="Node" parent="."]

[node name="Player" parent="Characters" instance=ExtResource("2_8bbij")]
position = Vector2(170, 540)
sprite_frames = null

[node name="Opponent" parent="Characters" instance=ExtResource("2_8bbij")]
position = Vector2(1770, 540)
sprite_frames = null
flip_h = true

[node name="Player" parent="." instance=ExtResource("1_5w4lb")]

[node name="Lyrics" parent="." instance=ExtResource("4_y614f")]
visible = false
position = Vector2(960, 400)

[node name="Condition" type="Label" parent="."]
visible = false
anchors_preset = 10
anchor_right = 1.0
offset_right = 1920.0
offset_bottom = 80.0
grow_horizontal = 2
pivot_offset = Vector2(960, 40)
label_settings = SubResource("LabelSettings_5toyo")
horizontal_alignment = 1
vertical_alignment = 1

[node name="Audio" type="Node" parent="."]
script = ExtResource("6_1c6vl")

[node name="Ambience" type="AudioStreamPlayer2D" parent="Audio"]
stream = ExtResource("6_k5xf7")
volume_db = -25.0
autoplay = true
panning_strength = 0.0

[node name="Music" type="AudioStreamPlayer2D" parent="Audio"]
stream = ExtResource("7_qhvl7")
volume_db = -20.0
autoplay = true
panning_strength = 0.0

[node name="Bout" type="AudioStreamPlayer2D" parent="Audio"]
panning_strength = 0.0
script = ExtResource("12_ahgql")
start = ExtResource("13_mkk52")
numbers = Array[AudioStream]([ExtResource("14_1dwrt"), ExtResource("15_lsvah"), ExtResource("16_cwoys"), ExtResource("17_uwso4"), ExtResource("18_vtahj"), ExtResource("19_6uw13"), ExtResource("20_6xxa0"), ExtResource("21_e1ktq")])

[node name="Vs" type="AudioStreamPlayer2D" parent="Audio"]
volume_db = 12.0
panning_strength = 0.0
script = ExtResource("13_2obuc")
versus = ExtResource("23_i5xb0")
winner = ExtResource("24_w88v5")

[connection signal="finished_line" from="Characters/Player" to="." method="_on_player_finished_line"]
[connection signal="finished_singing" from="Characters/Player" to="." method="_on_player_finished_singing"]
[connection signal="finished_line" from="Characters/Opponent" to="." method="_on_opponent_finished_line"]
[connection signal="finished_singing" from="Characters/Opponent" to="." method="_on_opponent_finished_singing"]
[connection signal="discard_selected" from="Player" to="." method="_on_discard_selected"]
[connection signal="phrase_selected" from="Player" to="." method="_on_player_phrase_selected"]
[connection signal="play_selected" from="Player" to="." method="_on_play_selected"]
[connection signal="words_selected" from="Player" to="." method="_on_player_words_selected"]
[connection signal="finished" from="Audio/Ambience" to="Audio" method="_on_ambience_finish"]
[connection signal="finished" from="Audio/Music" to="Audio" method="_on_music_finished"]
[connection signal="callout_finished" from="Audio/Bout" to="." method="_on_bout_callout_finished"]
[connection signal="finished" from="Audio/Bout" to="Audio/Bout" method="_on_finished"]
[connection signal="finished_callout" from="Audio/Vs" to="." method="_on_finished_callout"]
[connection signal="finished_winner" from="Audio/Vs" to="." method="_on_finished_winner"]
